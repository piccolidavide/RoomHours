@use "sass:map"; // Upload sass module for map manipulations


// Custom colors scheme
$primary: #6f42c1; // Viola vibrante
$secondary: #fd7e14; // Arancione vibrante
$dark: #212529; // Sfondo scuro
$body-bg: $dark; // Sfondo generale del body
$body-color: #f8f9fa; // Colore del testo chiaro
$navbar-bg: #00000079; // Navbar pi√π scura del body-bg

// Custom theme colors map
$theme-colors: (
	"primary": $primary,
	"secondary": $secondary,
	"success": #198754,
	"info": #0dcaf0,
	"warning": #ffc107,
	"danger": #dc3545,
	"light": #f8f9fa,
	"dark": $dark,
);

// Import Bootstrap with custom variables
@use "../../node_modules/bootstrap/scss/bootstrap" with (
	$primary: $primary,
	$secondary: $secondary,
	$theme-colors: $theme-colors,
	$body-bg: $body-bg,
	$body-color: $body-color
);

// Dark mode styles
[data-bs-theme="dark"] {
	background-color: $dark;
	color: $body-color;

	.text-primary {
		color: $primary !important;
	}

	.text-secondary {
		color: $secondary !important;
	}

	// Custom button styles
	.btn-primary {
		background-image: linear-gradient(135deg, $primary, $secondary);
		background-color: transparent;
		border: 0px solid transparent; // O usa border-color: $primary se vuoi un bordo
		color: #ffffff; // O $body-color per il tuo tema

		&:hover {
			background-image: linear-gradient(90deg, mix(black, $primary, 20%), mix(black, $secondary, 20%));
			border-color: mix(black, $primary, 10%);
		}

		&:focus,
		&:focus-visible {
			box-shadow: 0 0 0 0.25rem rgba($primary, 0.5);
		}
	}

	.btn-secondary {
		background-color: $secondary;
		border-color: $secondary;

		&:hover {
			background-color: mix(black, $secondary, 10%);
			border-color: mix(black, $secondary, 10%);
		}

		&:focus,
		&:focus-visible {
			box-shadow: 0 0 0 0.25rem rgba($secondary, 0.5);
		}
	}

	// Custom form styles
	.form-control {
		background-color: #343a40;
		color: $body-color;
		border-color: mix(black, #ffffff, 40%);

		&:focus {
			background-color: #343a40;
			color: $body-color;
			border-color: $secondary;
			box-shadow: 0 0 0 0.25rem rgba(253, 126, 20, 0.25);
		}
	}

	.form-card {
		background-color: #1e2124;
		border: 1px solid mix(black, #ffffff, 40%);
		border-radius: 1rem;
		padding: 1rem;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
		margin-top: 4em;

		h4 {
			color: mix(black, #ffffff, 20%);
		}
	}

	// Style for succes alert toast
	.alert-success {
		background-color: mix(black, #198754, 40%);
		color: $body-color;
	}

	// Style for danger alert toast
	.alert-danger {
		background-color: mix(black, #dc3545, 40%);
		color: $body-color;
	}

	//Cardnav styles
	.card-nav-container.navbar.navbar-expand-lg,
	.card-nav-container.navbar.navbar-expand-lg.navbar-dark {
		background-color: $navbar-bg !important; //navbar color
		position: absolute;
		top: 1.5em;
		left: 50%; //Center horizontally
		transform: translateX(-50%);
		width: 90%; // Occupy 90% 
		max-width: 800px;
		z-index: 1100; // Priority above other elements
		box-sizing: border-box;
		border: 0.5px solid rgba($body-color, 0.1);
		border-radius: 0.75rem;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
		height: 60px;
		padding: 0;
		overflow: visible;
		
		// Navbar content
		.card-nav-top {
			position: relative; 
			height: 60px;
			display: flex;
			align-items: center;
			justify-content: center; 	
			padding: 0.5rem 1rem;  
		}

		// Logo style and position
		.navbar-logo-container {
			position: absolute; //make sure it's on the left
			left: 1rem; // Some space from the left edge
			display: flex; 
			align-items: center; 

			img {
				margin-right: 0.5rem; 
				width: 40px; 
				height: 40px; 
				object-fit: contain; // keeps aspect ratio
			}
		}

		// Title container 
		.navbar-brand-container {
			position: absolute; // In the center of the nav
			left: 50%; // Center horizontally
			transform: translateX(-50%);
			display: flex;
			justify-content: center; 
			width: 100%;
			margin-bottom: 0.3rem; // Slightly adjust vertical position
		}

		.navbar-brand {
			margin: 0; // Remove default margin
			font-size: 2.4rem !important; // Title size
			line-height: 1; // More readable
			font-weight: 700; // more bold
			text-align: center;

			// Subtle shadow for better readability
			text-shadow: 
				-.5px -.5px 0 #ffffff,   
				.5px -.5px 0 #ffffff, 
				-.5px  .5px 0 #ffffff, 
				.5px  .5px 0 #ffffff; 
		}

		// Container for the button on the right
		.cta-button-container {
			position: absolute; // Make sure it's on the right
			right: 1rem; // Some space from the right edge
			display: flex; 
			align-items: center; 
		}
		
		.card-nav-cta-button {
			padding: 0.5rem 1rem; // Padding for better click area 
			background-image: linear-gradient(90deg, $primary, $secondary); //give it a gradient look
			background-color: transparent;
			border: 0px solid transparent; // no border
			color: #ffffff; // White text for contrast
			
			// On hover changes slightly the gradient and border color
			&:hover {
				background-image: linear-gradient(90deg, mix(black, $primary, 20%), mix(black, $secondary, 20%));
				border-color: mix(black, $secondary, 10%);
			}
			
			// When clicked or focused, add an orange shadow
			&:focus,
			&:focus-visible {
				box-shadow: 0 0 0 0.25rem rgba($secondary, 0.5); 
			}

			// dropdown specific styles
			&.dropdown {
				padding: 0; // Remove padding to fit the dropdown toggle
				align-items: center; 
				border-radius: 0.5rem; // Rounded corners 
				
				// Dropdown toggle button styles
				.dropdown-toggle{
					padding: 0.5rem 1rem; // Padding for better click area
					border-radius: 0.5rem;
					display: flex; 
					align-items: center; 
					width: 100%; // Full width to match the dropdown menu
					box-sizing: border-box; // Include padding and border in the width
					

					&::after {
						border-top-color: #ffffff; // aroow color
					}
					
				}
				
				// Dropdown menu styles
				.dropdown-menu {
					background-color: $dark;
					color: $body-color;
					width: max(5rem, 100%); //if the username is too short, the menu will be at least 5rem wide
					min-width: 100%; // Makes sure its not too big
					border-radius: 0.5rem; // Rounded corners
					text-align: end; // Align text to the right
					z-index: 1050; // Ensure it appears above the datepicker
					
					// Individual dropdown item styles
					.dropdown-item {
						color: $body-color; 
	
						// On hover, change background and text color for better visibility
						&:hover {
							background-color: mix(black, $dark, 20%);
							color: #ffffff;
						}
					}
					
					.dropdown-divider {
						border-top: 1px solid mix(black, #ffffff, 50%); // Light border for separation
					}
				}
			}

		}
	}

	.cardnav-dropdown-toast-form {
		background-color: $dark !important; // dark background
		color: $body-color !important; // light text color
		border-radius: 0.5rem; // rounded corners;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2); // slight shadow for depth
		border: 1px solid mix(black, #ffffff, 40%); // light border
		padding: 2rem; // padding for spacing
		min-width: 400px; 
		max-width: 90vw; // responsive width for small screens

		.Toastify__close-button {
			color: $body-color !important; // light color for close button
		}
		
		// Style for text in the toast
		p {
			margin: 0 0 1rem 0; // Remove margins and add bottom margin for spacing
			color: $body-color; 
			text-align: center; 
		}

		
		.toast-cancel-button {
			flex: 1 1 0; // Half width
			background-color: black;
			border: 1px solid $body-color; 
			color: $body-color !important; 
			
			// On hover, slightly change background 
			&:hover {
				background-color: mix(white, black, 20%);
			}
		}

		.toast-confirm-button {
			flex: 1 1 0; // Half width
			background-color: $primary;
			border: none; 
			color: $body-color !important;
			
			// On hover, slightly change background 
			&:hover {
				background-color: mix(black, $primary, 20%);
			}
		}
	}

	.home-page-container{
		margin-top: 7rem; // Space for the navbar
	}

	// Style for the date picker in home page
	.date-picker {
		display: flex;
		justify-content: center;
		align-items: center;
		width : min(38rem, 80%); // Responsive width
		margin-left: auto; // Center horizontally
		margin-right: auto; // Center horizontally
		position: sticky; // Stays at the top when scrolling
		top : 0; // Top of the viewport
		z-index: 1000; // Above other elements but below navbar

		// form that shows the current selected date
		.form-control{
			text-align: center;
			-webkit-text-fill-color: $body-color;
			background-color: $navbar-bg;
			border: 0px solid transparent; // No border

			// On focus, remove shadow
			&:focus{
				box-shadow: none;
			}
		}
	}

	// Chart container styles
	.chart-container {
		display: flex;
		justify-content: center;
		align-items: center;
		margin-top: 1rem;
	}

	.chart-card {
		width: 80%; // Responsive width
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2); // slight shadow for depth
		margin: auto; // Center horizontally
		
		h5 {
			color: mix( #000000, $body-color, 30%); // Dark title
		}
		
		.card-body {
			height: 30rem; // height for the chart
			display: flex; 
			flex-direction: column;
			align-items: center;
			padding: 1rem; 

			p {
				text-align: center;
				font-weight: bold;
				font-size: 1.2rem;
				margin-top: 1rem;
				color: $body-color;
			}
		}
	}

	// Divider between chart sections
	.divider {
		display: flex;
		align-items: center;
		text-align: center;
		margin: 1em 0; // Space above and below
		line-height: 2em; // Line thickness
		color: $primary; //white
		position: relative; 
		
		// lines on the sides of the text
		&:before,
		&:after {
			content: "";
			flex: 1;
			height: 1px; // Line thickness

			// Gradient effect
			background: linear-gradient(to right,
					transparent,
					gray 50%,
					transparent); 

			margin: 0 10px; // Space between text and lines
		}

		// Text styles
		&.gradient {
			font-weight: bold; // Bold text
			text-transform: uppercase; 

			// Shadow for better readability
			text-shadow: 
				-.5px -.5px 0 #ffffff,  
				.5px -.5px 0 #ffffff,
				-.5px  .5px 0 #ffffff,
				.5px  .5px 0 #ffffff;
		}

	}
	
	// Responsive style for small screens
	@media (max-width: 600px) { 
		.card-nav-container.navbar.navbar-expand-lg,
		.card-nav-container.navbar.navbar-expand-lg.navbar-dark {

			.navbar-brand-container {
				display: none; // Hide the logo of the navbar when the screen is small
			}
		}
	}
}
